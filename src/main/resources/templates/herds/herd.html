<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <head th:replace="partials/partials.html :: head('Herd')"></head>
    <link type="text/css" rel="stylesheet" href="/modaltest.css">
</head>
<body>
<nav th:replace="partials/partials.html :: nav"></nav>
<!--  This is the main section of the page  -->
<section class="container py-5">
    <article class="d-flex justify-content-center">
        <div class="d-flex card py-2 bg-success" style="width: 70%">
            <div class="d-flex justify-content-center">
                <h2>Details for (herd name)</h2>
            </div>
            <!--  Modal container  -->
            <div id="modal-container"></div>
            <div class="d-flex justify-content-center">
                <button id="edit-goat-button">Edit</button>
                <button id="delete-goat-button">Delete</button>
                <button id="add-goat-button">Add Goat</button>
            </div>
            <div class="d-flex justify-content-center" id="herd-table">
                <div class="d-flex" th:each="goat : ${herd}">
                    <div class="container">
                        <div class="px-5">
                            <div th:text="${goat.name}"></div>
                        </div>
                    </div>
                    <div class="container">
                        <div class="px-5">
                            <div th:text="${goat.id}"></div>
                        </div>
                    </div>
                    <div>
                        <div class="px-5 container">
                            <div th:text="${goat.sex}"></div>
                        </div>
                    </div>
                    <div class="justify-content-center">
                        <div class="px-5 container">
                            <div th:text="${goat.breed}"></div>
                        </div>
                    </div>
                </div>
                <br>
            </div>
        </div>
    </article>

    <!--    Bonus features if we can get to them, could possibly go here, or where ever we want  -->
    <article class="d-flex justify-content-center py-5">
        <h1>BONUS FEATURES MAYBE!!!!</h1>
    </article>

    <!--    Link to the top of the page (if we need it / for a large herd)  -->
    <article class="d-flex justify-content-center">
        <a href="#">Return to top of page</a>
    </article>
</section>

<!--  The following section is where we would include a footer partial  -->
<section class="container-fluid d-flex justify-content-center bg-warning">
    <h3>Footer Here</h3>
</section>
<!-- Bootstrap CDN-->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-ka7Sk0Gln4gmtz2MlQnikT1wXgYsOg+OMhuP+IlRH9sENBO0LRn5q+8nbTov4+1p"
        crossorigin="anonymous"></script>
<!-- JQuery CDN-->
<script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
        crossorigin="anonymous">
</script>
<script>
    $("#add-goat-button").on("click", () => {
        $("#modal-container").html(addGoatForm());
        document.getElementById("add-goat-cancel-button").addEventListener("click", () => {
            $("#modal-container").html("");
        });
    });
    document.getElementById("edit-goat-button").addEventListener("click", () => {
        alert("edit-goat-button clicked.");
    });
    document.getElementById("delete-goat-button").addEventListener("click", () => {
        alert("delete-goat-button clicked.");
    });

    // Add new goat modal form
    const addGoatForm = () => {
        return `
            <div class="modal-wrapper container">
                <form action="/herds/${herd.id}" method="POST">
                    <label for="name">Name</label>
                    <input type="text" id="name">
                    <label for="dob">Date of birth</label>
                    <input type="text" id="dob">
                    <label for="breed">Breed</label>
                    <input type="text" id="breed">
                    <label for="sex">Sex</label>
                    <input type="text" id="sex">
                    <label for="tag_id">Tag ID</label>
                    <input type="text" id="tag_id">
                    <label for="weight_in_pounds">Weight in pounds</label>
                    <input type="text" id="weight_in_pounds">
                    <label for="herd_id">Herd ID</label>
                    <input type="text" id="herd_id">
                    <div id="add-goat-button-container" class="d-flex justify-content-between py-1">
                        <button class="add-goat-button" id="add-goat-cancel-button">Cancel</button>
                        <button class="add-goat-button" id="add-goat-add-button" type="submit">Add Goat</button>
                    </div>
                </form>
            </div>
            `
    };
</script>
</body>
</html>